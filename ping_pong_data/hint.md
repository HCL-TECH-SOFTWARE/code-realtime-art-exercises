To add a member variable to a capsule place the cursor after its initial `{` and press `ctrl+space`. Select the command **New Code Snippet (Declarations)**. Inside that `rt::decl` code snippet define the member variable with C++ code.

To ensure `ping` is sent only 3 times place the line that sends the event within an if-statement.